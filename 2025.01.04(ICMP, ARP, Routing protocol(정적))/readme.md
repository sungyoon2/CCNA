# 2024.01.14(ICMP, ARP, Routing Protocol(정적))

ICMP
---
> 1. 정의<br>
  - 네트워크 계층에서 IP패킷을 처리시에 발생하는 문제를 알리거나, 진단과 같은 IP계층에서 필요한 기능 수행을 위해 사용

> 2. 처리<br>
```
  1) 통신 => 요청과 응답이 하나의 과정
  2) 통신의 구조
      (1) 연결의 확인을 위해서 ping을 전송
      (2) ICMP 코드가 송수신되는데 정상적인 통신일 경우
          - ICMP Request code : 8
          - ICMP Reply code   : 0
          이 송수신에 이용되어 연결이 되어있음을 확인 시켜줌
  3) 기타 메세지 종류
      (1) Destination Unreachable code : 3 => 네트워크가 끊겨 있거나, 장비가 꺼져있는 등의 이유로 최종 목적지에 도달할 수 없음을 의미
      (2) Time Exceeded code : 11 => TTL 값이 감소하여 0이 되었을때 이 메시지를 전송
```


ARP
---
> 1. 목적<br>
```
    1) Lan구간에 한해서 : Ethernet 통신(Mac주소체제를 이용하여
    2) IP 주소를 이용해서 MAC주소를 학습시키는 데 이용
        - 학습 시키는 방법 : 적절한 MAC주소를 찾기위해 Broadcast로 ip주소를 전송 -> 해당 ip주소를 가진 장치가 자신의 MAC주소를 Unicast로 정보전송
    3) 다른 통신망의 경우는 GW를 먼저 찾으러 가고 GW에 가서도 다른 통신망을 모르기에 유실후 한번더 서버를 찾아서 감
```

> 2. 추가적 알아야 함<br>
```
* MAC 주소
    - L2 에서 이용
    - 48 Bit
    - 16진수로 표시 -> 10진수는 4비트를 쓰는데 칸이 남기에 데이터가 낭비가 됨, 이를 해결하기위해 4비트칸을 마져 1111로 모두 채운 16진수가 사용됨
    - 3마디(. , :)로 구분
      -- min : 0000:0000:0000
      -- max : ffff.ffff.ffff
      -- 여기서 0이나 f한자리당 4bit 즉, 한 마디가 16비트임
      -- 앞의 6자리는 vendor ID로 회사마다 고정된 값이 사용
      -- 뒤의 6자리는 Device ID로 장치와 장치를 구별해주는 ID

* MAC 주소 : 물리적 주소 -> 고정됨(바꿀 수 없음)   <-----> IP 주소 : 논리적 주소 -> 바꿀 수 있음
```


Routing protocol
---

> 1. 개요<br>
```
    1) 사전에 만들어진 통신용 Program
    2) 송신용 Program
    3) 경로 탐색, 안내의 용도 -> 이를 위해 전체 경로를 이미 알고 있음이 선행되어야 하고 이를 통해 최적의 경로를 도출해야 함
```

> 2. 종류<br>
```
    1) 정적 routing Protocol
        - 목적지에 대한 방향에 대한 정보를 관리자가 직접 넣어주는 것
        - 부하가 낮으며, 우선 순위가 더 높음
        - 단점 : 통신망 문제 발생시 유동적으로 반응을 하지 못함

    2) 동적 routing Protocol
        - Routing Protocol이 자체적으로 경로를 생성(전체네트워크를 탐색 후)
        - 최적의 경로를 지속적으로 탐색하는 방법
        - 부하가 높음
        - 문제 생길시 변화를 감지(민감도가 높음) -> 차선 경로를 안내함
```

> 3. 정적 Routing protocol의 종류
```
    1) Sstatic : 하나의 목적지에 대한 방향으로 지정
    2) Default : 그외의 나머지 모든 목적지에 대한 방향을 직접 넣음
```

> 4. 정적 Routing 실습
```
1) 기본 용어
    - Serial port : Wan구간에서 사용하는 포트
    - Static routing사용하는 이유 : router 2개끼리 연결시 routing을 안할시 연결이 안되기에
    - TTL : 무한정이면 문제가 생기며, 라우터 이상의 장치를 통과할 때마다 1씩 감소하며, 0이 될시 소멸한다

2) Time out이 뜨는 이유 
    (1) IP 설정이 안되있는 경우
    (2) 송신부 GW가 설정X
    (3) 수신부 GW가 설정X
    (4) Routing이 되지 않았을 때 -> 보낸 클라이언트로 ICMP Code(3)-no destination이 등장

3) routing 명령어
    (1) 모드 진입명령어
        enable : 특권 모드 전환 -> en
        disable : 일반 사용자 모드 전환
        config terminal : 전역설정 모드 전환 -> conf t
        interface 포트라벨 : Interface 설정 모드 전환 -> inter [-]
        exit : 하위 모드로 나가기
        end : 특권 모드로 복귀
--------------------------------------------------------------------------------------------------------
    (2) 라우팅 관련명령어
        show ip route : 라우팅 테이블 확인
        router : 동적 라우팅 프로토콜 사용
        net [NetworkIP] : 동적 라우팅 프로토콜에 네트워크 등록
        show ip protocols : 라우팅 프로토콜 관련 정보 확인
        ip route [도착지 NW ID] [서브넷 마스크] [이웃라우터IP or 다음 라우터로 가는 경로] : 정적 라우팅 프로토콜 설정
---------------------------------------------------------------------------------------------------------
    (3) 동작상태 확인명령어
        [일반 사용자 모드]
          show clock 
          show history 
          show hosts 
          show sessions 
          show snmp 
          show terminal 
          show users 
          show version 등
          show version 으로 알 수있는 것들
              라우터 타입, IOS image, 시스템 동작시간, 현재 IOS 버젼, 장착된 인터페이스,메모리량 등
        [특권모드]
          show ip interface
          show interface 
          show ip route 
          show running-config
              현재 설정된 상황을 종합적으로 보여줌
          show startup-config
----------------------------------------------------------------------------------------------------------
    (4) 기타 명령어
        copy r s : 저장
        ctrl+shift+6 : 시간이 오래 지연시 작업 강제 종료
```
        
